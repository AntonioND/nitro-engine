# SPDX-License-Identifier: GPL-3.0-or-later
#
# Copyright (c) 2008-2011, 2019, Antonio Niño Díaz

# Variables

NAME		:= md2_to_nea
# Either leave the extension empty or assign .exe to it for Windows
EXT		:=

CFLAGS		:= -g -Wall
RM		:= rm -rf

# Rules to build the binary

all: $(NAME)$(EXT)

OBJS := md2_to_nea.o dynamic_list.o framemaker.o

$(NAME)$(EXT): $(OBJS)
	$(CC) $(CFLAGS) -o $@ $(OBJS)

.c.o:
	$(CC) $(CFLAGS) -c -o $@ $<

# Target used to remove all files generated by other Makefile targets

clean:
	$(RM) $(NAME) $(NAME).exe $(OBJS)

# Targets to cross-compile Windows binaries from Linux. Not used to compile
# natively from Windows.

mingw32:
	make CC=i686-w64-mingw32-gcc EXT=.exe

mingw64:
	make CC=x86_64-w64-mingw32-gcc EXT=.exe
