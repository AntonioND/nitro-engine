# SPDX-License-Identifier: GPL-3.0-or-later
#
# Copyright (c) 2008-2011, 2019, Antonio Niño Díaz

# Variables

VERSION_STRING	:= `git describe --tags --dirty --always 2>/dev/null`
CFLAGS		:= -g -Wall -DBUILD_VERSION_STRING=\"$(VERSION_STRING)\"
RM		:= rm -rf

# Rules to build the binary

all: md2_2_bin

md2_2_bin_obj := md2_2_bin.o dlmaker.o

md2_2_bin: $(md2_2_bin_obj)
	$(CC) $(CFLAGS) -o $@ $(md2_2_bin_obj)

# Rules to process files

.c.o:
	$(CC) $(CFLAGS) -c -o $@ $<

# Target used to remove all files generated by other Makefile targets

clean:
	$(RM) md2_2_bin md2_2_bin.exe $(md2_2_bin_obj)
